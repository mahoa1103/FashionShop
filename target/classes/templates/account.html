<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Manage Accounts</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/5a213e1813.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>

    <style>
         span.error{
            color: red;
            margin-left: 5px;
        }
        li {
            margin: 0 5px;
        }

        .listPage {
            padding: 10px;
            text-align: center;
            list-style: none;
        }

        .listPage li {
            background-color: white;
            padding: 10px 20px;
            display: inline-block;
            margin: 0 10px;
            cursor: pointer;
        }

        .listPage .active {
            background-color: #5CB85C;
            color: white;
        }

        #edit,
        #addNew {
            position: absolute;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            width: 100%;
            height: 100%;
            justify-content: center;
            align-items: center;
            display: none;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .active {
            border: 0;
            border-bottom: #5CB85C 2px solid;
            color: black;
        }

        @media only screen and (max-width: 1015px) {
            #search, #manage {
                width: 100%;
                margin-bottom: 10px;
                text-align: center;
            }
            #dropdownRole {
                width:60%;
            }
            #btnAdd{
                width:40%;
            }
        }
    </style>
</head>

<body>
<nav class="navbar navbar-expand-lg bg-body-tertiary sticky-top shadow-sm">
    <div class="container-fluid">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo02"
                aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
            <a class="navbar-brand" th:href="@{/admin}"><img
                    src="https://img.freepik.com/premium-vector/organic-icon-100-percent-organic-product-label_349999-1003.jpg?w=2000"
                    alt="brand_icon" width="100"></a>
            <div class="collapse navbar-collapse ms-3" id="navbarTogglerDemo02">
                <ul class="navbar-nav me-auto">

                    <li class="nav-item">
                        <a class="nav-link" th:href="@{/admin/product}">SẢN PHẨM</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" th:href="@{/admin/sale}">BÁN HÀNG</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" th:href="@{/admin/orders}">ĐƠN HÀNG</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" th:href="@{/admin/category}">DANH MỤC</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" th:href="@{/admin/suppliers}">NHÀ CUNG CẤP</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" th:href="@{/admin/import}">NHẬP HÀNG</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" th:href="@{/admin/list-account}">QUẢN LÝ TÀI KHOẢN</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" th:href="@{/admin/statistic}">THỐNG KÊ</a>
                    </li>

                </ul>
            </div>

            <!--            <div class="dropdown me-5">-->
            <!--                <button class="btn btn-light dropdown-toggle" type="button" data-toggle="dropdown"  aria-expanded="false">-->
            <!--                    Hi, <span th:text="${loggedInUser.lastName}"></span>-->
            <!--                    <span th:text="${loggedInUser.firstName}"></span>-->
            <!--                </button>-->
            <!--                <ul class="dropdown-menu dropdown-menu-end">-->
            <!--                    <li><a class="dropdown-item"  th:href="@{/admin/profile}">Thông tin cá nhân</a></li>-->
            <!--                    <li><hr class="dropdown-divider"></li>-->
            <!--                    <li><a class="dropdown-item" th:href="@{/logout}">Đăng xuất</a></li>-->
            <!--                </ul>-->
            <!--            </div>-->

            <div class="dropdown me-4">
                <button class="btn btn-light dropdown-toggle" type="button" data-bs-toggle="dropdown"
                        aria-expanded="false">
                    Hi, <span th:text="${loggedInUser.lastName}"></span>
                    <span th:text="${loggedInUser.firstName}"></span>
                </button>
                <ul class="dropdown-menu dropdown-menu-end">
                    <li><a class="dropdown-item" th:href="@{/admin/profile}">Thông tin cá nhân</a></li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li><a class="dropdown-item" th:href="@{/logout}">Đăng xuất</a></li>
                </ul>
            </div>

        </div>
    </nav>

<div class="px-5">
    <div class="row align-middle mt-4 mb-4">
        <div class="col-2" id="manage">
            <h4 style="color: #5CB85C;">Quản lý tài khoản</h4>
        </div>
        <div class="col-5" id="search">
            <form class="d-flex" role="search">
                <input class="form-control me-2" type="search" placeholder="Tìm tài khoản..." aria-label="Search">
                <button style="background-color: #5CB85C; color:white;" class="btn btn-outline-success border-0"
                        type="submit"><i class="fa-solid fa-magnifying-glass"></i></button>
            </form>
        </div>

        <div class="col-2" id="dropdownRole">
            <div class="form-group form-inline">
                <select id="vaiTro" class="form-control form-select">
                    <option th:each="role : ${listRole}" th:value="${role.roleName}"
                            th:text="${role.roleName}"></option>
                </select>
            </div>
        </div>

        <div class="col-3 text-end" id="btnAdd">
            <button style="background-color: #5CB85C; color:white;vertical-align: middle;" type="button"
                    class="btn btn-success shadow-sm border-0 btnThemTaiKhoan" data-bs-toggle="modal"
                    data-bs-target="#taiKhoanModal">
                Thêm mới<i style="font-size: 23px; vertical-align: middle;"
                            class="fa-solid fa-square-plus ms-3"></i></button>
        </div>

    </div>


    <table class="table text-center align-middle border taiKhoanTable">
        <thead class="table-secondary">
        <tr>
            <th scope="col-1">Mã tài khoản</th>
            <th scope="col-2">Tên</th>
            <th scope="col-1">Họ</th>
            <th scope="col-2">Email</th>
            <th scope="col-1">Số điện thoại</th>
            <th scope="col-3">Địa chỉ</th>
            <th scope="col-1">Vai trò</th>
            <th scope="col"></th>
            <th scope="col"></th>
        </tr>
        </thead>
        <tbody class="list">

        </tbody>
    </table>


</div>


<!-- MODAL ADD USER -->
<div class="row col-md-9">
    <form class="taiKhoanForm" id="form">
        <div>
            <div class="modal fade" id="taiKhoanModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                 aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Tạo mới tài
                                khoản</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
<!--                            <div class="form-group">-->
<!--                                 <input type="hidden" class="form-control" name="id" /> -->
<!--                            </div>-->
                            <div class="form-group">
                                <label for="name">Email: <span style="color: red;">(*)</span></label>
                                <input type="email" class="form-control" name="email" placeholder="Nhập email" required/>
                            </div>
                            <div class="form-group">
                                <label for="name">Mật khẩu:(8-32 ký tự) <span style="color: red;">(*)</span></label>
                                <input type="password" class="form-control" name="password" placeholder="Nhập mật khẩu" required/>
                            </div>
                            <div class="form-group">
                                <label for="name">Nhắc lại mật khẩu: <span style="color: red;">(*)</span></label>
                                <input type="password" class="form-control" name="confirmPassword" placeholder="Nhập lại mật khẩu" required/>
                            </div>

                            <div class="form-group">
                                <label for="name">Chọn vai trò: </label>
                                <div th:each="role : ${listRole}">
                                    <label class="radio-inline">
                                        <input type="radio"
                                               name="roleName"
                                               th:value="${role.roleName}"
                                               checked="checked"/>
                                        [[${role.roleName}]]
                                    </label>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="name">Họ: <span style="color: red;">(*)</span></label>
                                <input type="text" class="form-control" name="lastName" placeholder="Nhập Họ và tên lót" required/>
                            </div>
                            <div class="form-group">
                                <label for="name">Tên: <span style="color: red;">(*)</span></label>
                                <input type="text" class="form-control" name="firstName" placeholder="Nhập tên" required/>
                            </div>
                            <div class="form-group">
                                <label for="name">Số điện thoại: <span style="color: red;">(*)</span></label>
                                <input type="text" class="form-control" name="phone" placeholder="Nhập SĐT" required/>
                            </div>
                            <div class="form-group">
                                <label for="name">Địa chỉ: <span style="color: red;">(*)</span></label>
                                <input type="text" class="form-control" name="address" placeholder="Nhập địa chỉ" required/>
                            </div>

                        </div>

                        <div class="modal-footer">
                            <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Hủy</button>
                            <input class="btn btn-primary" id="btnSubmit" type="button" value="Xác nhận"/>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>

<!--<script>-->
<!--    let thisPage = 1;-->
<!--    let limit = 5;-->
<!--    let list = document.querySelectorAll('.list .item');-->

<!--    function loadItem() {-->
<!--        let beginGet = limit * (thisPage - 1);-->
<!--        let endGet = limit * thisPage - 1;-->
<!--        list.forEach((item, key) => {-->
<!--            if (key >= beginGet && key <= endGet) {-->
<!--                item.style.display = 'table-row';-->

<!--            } else {-->
<!--                item.style.display = 'none';-->
<!--            }-->
<!--        })-->
<!--        listPage();-->

<!--    }-->

<!--    loadItem();-->

<!--    function listPage() {-->
<!--        let count = Math.ceil(list.length / limit);-->
<!--        document.querySelector('.listPage').innerHTML = '';-->

<!--        if (thisPage != 1) {-->
<!--            let prev = document.createElement('li');-->
<!--            prev.innerHTML = '<i class="fa-solid fa-angles-left"></i>';-->
<!--            prev.setAttribute('onclick', "changePage(" + (thisPage - 1) + ")");-->
<!--            document.querySelector('.listPage').appendChild(prev);-->
<!--        }-->

<!--        for (i = 1; i <= count; i++) {-->
<!--            let newPage = document.createElement('li');-->
<!--            newPage.innerText = i;-->
<!--            if (i == thisPage) {-->
<!--                newPage.classList.add('active');-->
<!--            }-->
<!--            newPage.setAttribute('onclick', "changePage(" + i + ")");-->
<!--            document.querySelector('.listPage').appendChild(newPage);-->
<!--        }-->
<!--        if (thisPage != count) {-->
<!--            let next = document.createElement('li');-->
<!--            next.innerHTML = '<i class="fa-solid fa-angles-right"></i>';-->
<!--            next.setAttribute('onclick', "changePage(" + (thisPage + 1) + ")");-->
<!--            document.querySelector('.listPage').appendChild(next);-->
<!--        }-->
<!--    }-->

<!--    function changePage(i) {-->
<!--        thisPage = i;-->
<!--        loadItem();-->
<!--    }-->

<!--    &lt;!&ndash;Open form Add New&ndash;&gt;-->
<!--    function openAddNew() {-->
<!--        let x = document.getElementById("addNew");-->
<!--        x.style.display = "flex";-->
<!--    }-->

<!--    function closeAddNew() {-->
<!--        let x = document.getElementById("addNew");-->
<!--        x.style.display = "none";-->
<!--    }-->

<!--    function openEdit() {-->
<!--        let x = document.getElementById("edit");-->
<!--        x.style.display = "flex";-->
<!--    }-->

<!--    function closeEdit() {-->
<!--        let x = document.getElementById("edit");-->
<!--        x.style.display = "none";-->
<!--    }-->
<!--</script>-->

<script
        src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script
        src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script
        src="https://cdnjs.cloudflare.com/ajax/libs/jquery.serializeJSON/2.9.0/jquery.serializejson.js"></script>

<script th:src="@{/js/taiKhoanAjax.js}"></script>

</body>
</html>